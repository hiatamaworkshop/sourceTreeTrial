<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>APIテンプレート　ホーム</title>
  <script>
  	//console.log("header test from web page"); //impossible through html
    // let xhr = new XMLHttpRequest();
    //     xhr.setRequestHeader('bearer', 'myJWT'); //このようにbearerを使うのが作法のよう
  </script>
</head>
<body>

<h1 style= "text-align:center;">基礎ページ</h1>

<form action="" method="post">
  <div>
    <label>First Name：</label>
    <input type="text" name="firstName" value="myFirstName">
  </div>
  <div>
    <label>Last Name：</label>
    <input type="text" name="lastName" value="myLastName">
  </div>
  <div>
    <label>Nationality：</label>
    <input type="text" name="nationality" value="Japan">
  </div>
  <div>
    <input type="hidden" name="token" value="testToken">
    <input type="submit" value="Submit">
  </div>
</form>

<input type="submit" value="postWithFetch" onclick="myPostMethod()">

<script>
  
  const obj = {
    username: "world",
    password: "himitsu"        
  };

  const method = "POST";      
  const body = JSON.stringify(obj);
  const headers = {
        'Accept': 'application/json',
        'Content-Type': 'application/json',
        'Version': 1.1,
        'Authorization': 'Bearer + testToken'
  };

  async function myPostMethod(){
    console.log("Posting through Fetch");
    await fetch("./login", {method, headers, body})
    .then((res)=> console.log(res.url))
    //.then((res)=> window.location.href = res.url) //サーバーから指定のＵＲＬが入っている
    .catch((err)=> console.log(err));
  }
    
</script>

<!-- messageログ -->
<ul id="msglist">
</ul>
</div>

</body>
</html>